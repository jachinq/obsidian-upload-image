# upload-image

[English](README.md) | 简体中文

一个 [Obsidian](https://obsidian.md/) 插件，用于将本地图片上传到图床并插入到笔记中。

## 安装

下载本仓库, 解压成文件夹后, 复制到 Obsidian 插件文件夹下即可。

具体的 Obsidian 插件文件夹路径:

`你的仓库路径/.obsidian/plugins`

## 冲突

本插件和以下插件会有冲突，请不要同时启用。

- [obsidian-custom-attachment-location](https://github.com/RainCat1998/obsidian-custom-attachment-location) 

## 使用

首先在设置中启用功能, 在粘贴时插件会自动监听剪贴板的内容, 识别到剪贴板内容是图片时, 就会自动上传图片到图床, 并在成功上传后, 获取到图片链接, 最后将图片链接插入到笔记中

## 设置项解释

基本设置:

- 语言: 选择插件使用的语言, 目前支持中文和英文
- 启用功能: 是否开启本插件的功能
- 自动上传网络图片: 是否自动上传网络图片, 开启后, 插件会自动识别网络图片并上传, 在粘贴时, 如果内容包含 mardown 图片语法, 则会自动上传并替换图片的链接
- 替代文字: 图片加载失败时显示的提示文字
- 图片尺寸: 不影响上传图片的尺寸, 只影响在 Obsidian 中显示的图片大小, 语法为 ![|300](xxx), 其中 300 为图片展示尺寸

服务器设置:

- 服务器地址: 图床服务器地址, 如图床为 sm.ms, 则地址为 https://sm.ms, 注意结尾不要带有 / 符号
- 上传API: 图床的上传 API 地址, 如填写 /api/upload, 则最终使用的上传接口为 https://sm.ms/api/upload
- 图片质量: 会影响到上传图片的质量, 取值范围为 10-100, 100 时为原图上传, 服务器不会压缩图片
- 工作目录: 上传的图片所存放的路径, 留空则使用默认路径, 注意不要以 / 结尾

## 未来计划

- [x] 增加本地缓存机制, 检测 path, 避免重复上传相同的图片, 重新加载/重新打开仓库时缓存会自动清空
- [x] 新增命令, 支持删除图片操作, 将会调用服务删除接口清除图片
- [x] 新增命令, 支持将当前文档的图片上传到图床, 并替换当前文档中的图片链接

## License

MIT